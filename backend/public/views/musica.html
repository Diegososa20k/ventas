<h2>Mi mÃºsica</h2>

<div class="mb-3">
  <label>Tipo</label>
  <select class="form-select" ng-model="tipo" ng-change="cargar()">
    <option value="musica">MÃºsica</option>
    <option value="video">Videos</option>
  </select>
</div>

<ul class="list-group mb-4">
  <li class="list-group-item d-flex justify-content-between align-items-center"
      ng-repeat="item in lista">

    <!-- Nombre / reproducir -->
    <span ng-click="reproducir(item)" class="item-nombre">
      ðŸŽµ {{ item.nombre }}
    </span>

    <!-- 3 puntos SIN botÃ³n -->
    <span class="menu-3puntos"
          ng-click="abrirMenuPlaylist(item, $event)">
      â‹®
    </span>

  </li>
</ul>

<!-- MENÃš FLOTANTE -->
<div class="playlist-menu"
     ng-if="menuPlaylist"
     ng-style="menuStyle">

  <div class="playlist-item"
       ng-click="nuevaPlaylist(menuPlaylist)">
    âž• Nueva playlist
  </div>

  <div class="playlist-item"
       ng-repeat="pl in playlists"
       ng-click="agregarAPlaylist(menuPlaylist, pl)">
    ðŸŽ¶ {{ pl.nombre }}
  </div>

  <div class="playlist-item text-danger"
       ng-click="eliminar(menuPlaylist)">
    ðŸ—‘ Eliminar
  </div>

  <div class="playlist-item text-danger"
       ng-click="cerrarMenu()">
    âœ– Cancelar
  </div>

</div>

<div ng-if="seleccionado">
  <h5>Reproduciendo: {{ seleccionado.nombre }}</h5>

  <audio ng-if="tipo === 'musica'"
       ng-src="{{ mediaUrl }}"
       controls
       class="w-100">
</audio>


  <video ng-if="tipo === 'video'"
         ng-src="{{ mediaUrl }}"
         controls
         class="w-100"
         height="360">
  </video>
</div>

<style>
.item-nombre {
  cursor: pointer;
}

.menu-3puntos {
  cursor: pointer;
  padding: 4px 8px;
  font-size: 18px;
  user-select: none;
  color: #555;
}

.menu-3puntos:hover {
  background: #eee;
  border-radius: 50%;
}

.playlist-menu {
  position: fixed;
  background: #fff;
  border: 1px solid #ddd;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
  border-radius: 6px;
  width: 200px;
  z-index: 9999;
}

.playlist-item {
  padding: 8px 12px;
  cursor: pointer;
}

.playlist-item:hover {
  background: #f1f1f1;
}
</style>
